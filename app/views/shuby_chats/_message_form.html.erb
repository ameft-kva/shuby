<%# Message input form %>
<div id="message_form">
  <%= form_with url: message_shuby_chat_path(shuby_chat), method: :post, data: { controller: "shuby-form", action: "submit->shuby-form#submit keydown.enter->shuby-form#handleKeydown" }, class: "flex gap-3 items-end" do |f| %>
    <div class="flex-1">
      <% if local_assigns[:error] %>
        <p class="text-sm text-red-600 dark:text-red-400 mb-2"><%= error %></p>
      <% end %>

      <%= f.text_area :message,
          rows: 1,
          placeholder: "Scrivi un messaggio...",
          class: "w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",
          data: {
            shuby_form_target: "input",
            shuby_chat_target: "input",
            action: "input->shuby-form#autoResize"
          },
          autofocus: true %>
    </div>

    <button type="submit"
            class="btn btn-primary rounded-xl px-4 py-3 disabled:opacity-50 disabled:cursor-not-allowed"
            data-shuby-form-target="submit">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
        <path d="M3.105 2.288a.75.75 0 0 0-.826.95l1.414 4.926A1.5 1.5 0 0 0 5.135 9.25h6.115a.75.75 0 0 1 0 1.5H5.135a1.5 1.5 0 0 0-1.442 1.086l-1.414 4.926a.75.75 0 0 0 .826.95 28.897 28.897 0 0 0 15.293-7.155.75.75 0 0 0 0-1.114A28.897 28.897 0 0 0 3.105 2.288Z" />
      </svg>
      <span class="sr-only">Invia</span>
    </button>
  <% end %>

  <p class="text-xs text-gray-500 dark:text-gray-400 mt-2 text-center">
    Shuby pu√≤ commettere errori. Verifica sempre le informazioni importanti con il pediatra.
  </p>
</div>
